case "getOngoingJobAssignmentsByPlanId":
				JsonGeneratorFactory factoryJA = Json
						.createGeneratorFactory(null);
				JsonGenerator generatorJA = factoryJA.createGenerator(resp
						.getOutputStream());
				generatorJA.writeStartArray();
				for (JobAssignmentProducts jap : ejb
						.getOngoingJobAssignmentsByPlanId(
								Integer.parseInt(req.getParameter("pid"))).getJobAssignmentProducts()) {
					generatorJA
							.writeStartObject()
							.write("japId", jap.getId())
							.writeEnd();
				}
				generatorJA.writeEnd().close();
				break;


case "getProductAndDesignDetailsAndJobPlanByJobPlanId":
				JsonGeneratorFactory factoryM = Json
						.createGeneratorFactory(null);
				JsonGenerator generatorM = factoryM.createGenerator(resp
						.getOutputStream());
				generatorM.writeStartArray();
				for (ProductsForDesignCostSheet pdcs : ejb
						.getJobPlanById(
								Integer.parseInt(req.getParameter("pId")))
						.getDesignCostSheet().getProductsForDesignCostSheets()) {
					generatorM
							.writeStartObject()
							.write("ProductCode",
									pdcs.getProductDetail().getCode())
							.write("ProductId", pdcs.getProductDetail().getId())
							.write("ProductDesc",
									pdcs.getProductDetail().getDescription())
							.write("ProductUOMid",
									pdcs.getProductDetail().getQtyUnit()
											.getId())
							.write("ProductUOMName",
									pdcs.getProductDetail().getQtyUnit()
											.getName())
							.write("ProductRemainingQty",
									pdcs.getProductDetail().isRaw() ? pdcs
											.getProductDetail()
											.getRawMaterialsStock()
											.getRemainingQty() : pdcs
											.getProductDetail()
											.getReadyGoodsStock()
											.getRemainingQty())
							.write("ProductTotalAmount",
									ejb.getJobAssignmentProductDetailsByproductAndJobPlanId(
											pdcs.getProductDetail().getId(),
											Integer.parseInt(req
													.getParameter("pId")))
											.getEstimatedCost())
							.write("ProductQtyForSample", pdcs.getQty())
							.write("ProductRateForSample", pdcs.getRate())
							.write("ProductAmountForSample", pdcs.getAmmount())
							.write("ProductForSampleId", pdcs.getId())
							.writeEnd();
				}
				generatorM.writeEnd().close();
				break;